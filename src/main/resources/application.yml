# ============================
# ???????? ?????????
# ============================

spring:
  # ???????? ??????????
  application:
    name: price-tracker

  # ============================
  # ???? ?????? (PostgreSQL)
  # ============================

  datasource:
    # ??????????? ? PostgreSQL ? Docker
    url: jdbc:postgresql://localhost:5432/price_tracker
    username: admin
    password: secret123  # ?????? ?? docker-compose.yml
    driver-class-name: org.postgresql.Driver

    # ????????? ???? ?????????? HikariCP
    hikari:
      maximum-pool-size: 10      # ???????? 10 ???????????
      minimum-idle: 5            # ??????? 5 ??????????? ? ????
      connection-timeout: 30000  # ??????? 30 ??????

  # ============================
  # JPA (?????? ? ?????)
  # ============================

  jpa:
    # ????????????? ???????/????????? ???????
    hibernate:
      ddl-auto: update

    # ?????????? SQL-??????? ? ???????
    show-sql: true

    properties:
      hibernate:
        # ??????? ??????????? SQL ? ?????
        format_sql: true

        # ??????? PostgreSQL
        dialect: org.hibernate.dialect.PostgreSQLDialect

  # ============================
  # REDIS
  # ============================

  data:
    redis:
      # ??????????? ? Redis ? Docker
      host: localhost
      port: 6379

      # ??????? ?????????? 2 ???????
      timeout: 2000ms

  # ============================
  # SECURITY (????????? ??? ??????????)
  # ============================

  security:
    # ????????? ??????? ???????????
    basic:
      enabled: false

    # ????????? csrf ??? ???????????? API
    csrf:
      enabled: false

  # ============================
  # THYMELEAF (??????? HTML)
  # ============================

  thymeleaf:
    # ????????? ??? ???????? (????? ????????? ????? ????????????)
    cache: false

# ============================
# ??????
# ============================

server:
  # ???? ??????????
  port: 8080

  error:
    whitelabel:
      # ???????? ???????? ???????? ?????? Spring Boot
      enabled: true

# ============================
# ???????????
# ============================

logging:
  level:
    # ??????? ???????????
    root: INFO
    org.springframework.web: INFO

    # ????????? ???? SQL
    org.hibernate.SQL: DEBUG                   # ?????????? SQL ???????
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE  # ?????????? ????????? SQL

  pattern:
    # ?????? ??????? ????? ? ???????
    console: "%d{yyyy-MM-dd HH:mm:ss} %clr(%5p) %clr([%t]){faint} %clr(%logger{40}){cyan} %clr(:){faint} %m%n"

# ============================
# ????????? ??????????
# ============================

app:
  # Telegram ???
  telegram:
    # ????? ???? (??????????????? ????? ?????????? ?????????)
    bot-token: ${TELEGRAM_BOT_TOKEN:}
    bot-username: PriceTrackerBot

  # ?????? ???
  parser:
    # ???????? ????? ????????? ? ????????? (3 ???????)
    delay-ms: 3000